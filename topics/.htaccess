# Security Configuration for Ultrasound Segmentation Project

# This file provides server-side security measures for the locked ultrasound segmentation project
# These rules should be implemented in your web server configuration

# Apache .htaccess rules (if using Apache)
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Block direct access to obfuscated content file
    RewriteRule ^topics/ultrasound-content-obfuscated\.js$ - [F,L]
    
    # Block access with debug parameters
    RewriteCond %{QUERY_STRING} debug [NC]
    RewriteRule ^topics/ultrasound-bone-segmentation\.html$ - [F,L]
    
    # Block access with bypass parameters
    RewriteCond %{QUERY_STRING} bypass [NC]
    RewriteRule ^topics/ultrasound-bone-segmentation\.html$ - [F,L]
</IfModule>

# Nginx configuration (if using Nginx)
# location ~ ^/topics/ultrasound-content-obfuscated\.js$ {
#     return 403;
# }
# 
# location ~ ^/topics/ultrasound-bone-segmentation\.html$ {
#     if ($arg_debug) {
#         return 403;
#     }
#     if ($arg_bypass) {
#         return 403;
#     }
# }

# Additional security headers
<IfModule mod_headers.c>
    # Prevent caching of sensitive content
    <FilesMatch "ultrasound-content-obfuscated\.js">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </FilesMatch>
    
    # Security headers for the main page
    <FilesMatch "ultrasound-bone-segmentation\.html">
        Header set X-Content-Type-Options "nosniff"
        Header set X-Frame-Options "DENY"
        Header set X-XSS-Protection "1; mode=block"
    </FilesMatch>
</IfModule>

# Block access to sensitive files
<Files "ultrasound-content-obfuscated.js">
    Order Allow,Deny
    Deny from all
</Files>

# Rate limiting (if mod_evasive is available)
<IfModule mod_evasive24.c>
    DOSHashTableSize    2048
    DOSPageCount        10
    DOSSiteCount        50
    DOSPageInterval     1
    DOSSiteInterval     1
    DOSBlockingPeriod   600
</IfModule>
